    ; RLC3, tests RLC #4,r shifts
    main section code
    org 0
    ld a,0xbf    ; common header

    ld a,0

    ld d,1
    rlc 1,d
    cp d,2
    jp ne,bad_end

    ld d,1
    rlc 2,d
    cp d,4
    jp ne,bad_end

    ld d,1
    rlc 3,d
    cp d,8
    jp ne,bad_end

    ld d,1
    rlc 4,d
    cp d,0x10
    jp ne,bad_end

    ld d,1
    rlc 5,d
    cp d,0x20
    jp ne,bad_end

end_loop:
    ld hl,0xbabe
    ld (0xffff),0xff
    jp end_loop
bad_end:
    ld hl,0xdead
    jp bad_end

data:
    db 0x81,0x3,0x6,0xc,0x18,0x30,0x60,0xc0
    db 0x81,0x3,0x6,0xc,0x18,0x30,0x60,0xc0
    db 0x81,0x3,0x6,0xc,0x18,0x30,0x60,0xc0
    db 0x81,0x3,0x6,0xc,0x18,0x30,0x60,0xc0
    dw 0xffff,0xffff,0xffff,0xffff
stack:
    end